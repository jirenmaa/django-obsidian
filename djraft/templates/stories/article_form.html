{% extends "base.html" %}
{% load static%}

{% block content_section %}
<section class="web-body px-56 py-20">
  <story-creation>
    <form
      id="article-form"
      action="{% url 'me:new-story' %}"
      method="POST"
      enctype="multipart/form-data"
    >
      {% csrf_token %}
      <article-title id="article-title" class="flex mb-3">
        <h2
          id="id_title"
          class="border-l border-gray-300 text-7xl"
          name="title"
        >
          <span contenteditable="true" class="ml-2">Title</span>
        </h2>
      </article-title>
      <article-description id="article-description">
        <h2
          id="id_description"
          contenteditable="true"
          class="font-medium text-gray-500 text-xl my-5"
          name="description"
        >
          description
        </h2>
      </article-description>
      <article-cover id="article-cover">
        <div class="border border-gray-200" id="show-cover">
          <div class="flex justify-center">
            <img src="#" id="load-cover" style="display: none" />
          </div>
          <input
            type="file"
            id="id_cover"
            name="cover"
            style="display: none"
            onchange="loadFile(event)"
          />
          <label
            for="id_cover"
            id="cover-label"
            class="flex justify-center p-12"
            >Add Cover Image</label
          >
        </div>
      </article-cover>
      <article-body id="article-body">
        <div contenteditable="true" id="id_body" name="body" class="my-5">
          Tell your story ...
        </div>
      </article-body>
      <button
        class="text-white bg-green-400 hover:bg-green-500 rounded mb-8 py-2 px-8 mt-8"
        type="submit"
        id="publish"
      >
        Publish
      </button>
    </form>
  </story-creation>
</section>
{% endblock content_section %}
{% block javascript %}
<script>
  function loadFile(event) {
    var cover = document.getElementById("load-cover");
    var wrapper_cover = document.getElementById("show-cover");
    var label_cover = document.getElementById("cover-label");
    var article_body = document.getElementById("article-body");

    // Do somethin with this
    cover.removeAttribute("style");
    wrapper_cover.classList.remove("border");

    label_cover.innerHTML = "Change Cover Image";
    label_cover.classList.remove("p-12");
    label_cover.classList.add("p-3");

    article_body.classList.remove("my-16");
    article_body.classList.add("my-8");
    // Done

    cover.src = URL.createObjectURL(event.target.files[0]);
  }
</script>
<script src="{% static 'js/postArticleForm.js' %}"></script>
{% endblock javascript %}
