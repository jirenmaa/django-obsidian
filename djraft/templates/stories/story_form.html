{% extends "base.html" %}
{% load i18n %}
{% load utils %}

{% block title %}
  {{user.username }} ~ New story
{% endblock %}

{% block main %}
<div class="mx-auto px-6 sm:px-24 lg:px-32">
  <div class="w-full">
    <form
      class="bg-white px-8 pt-3 pb-8 mb-4"
      method="POST"
      enctype="multipart/form-data"
      action="{% url 'users:new-story' user.username %}"
    >
      <div class="mb-6">
        {% csrf_token %}
        {{ form.title }}
        {{ form.description }}
        <div class="flex justify-center">
          <img src="" id="show-cover">
        </div>
        {{ form.cover }}
        {{ form.body }}
      </div>
      <div class="flex items-center justify-between">
        <button
          class="text-white bg-blue-500 hover:bg-blue-700 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
          type="submit"
          id="publish"
        >
          {% trans "Publish" %}
        </button>
      </div>
    </form>
  </div>
</div>
<script>
  var loadFile = function(event) {
    var cover = document.getElementById('show-cover');
    cover.src = URL.createObjectURL(event.target.files[0]);
  };
</script>
{% endblock main %}
